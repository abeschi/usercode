process PROD  = 
{


service = TFileService {
   string fileName = "photonAnalyzer.root"

}


service =  RandomNumberGeneratorService {
// Initialize the random engine of the source
untracked uint32 sourceSeed = 123456789

// Initialize the random engines of Famos
PSet moduleSeeds =
{
            untracked uint32 VtxSmeared = 123456789
	    untracked uint32 famosPileUp = 918273
	    untracked uint32 famosSimHits = 13579
	    untracked uint32 siTrackerGaussianSmearingRecHits = 24680
	    untracked uint32 caloRecHits = 654321
	    untracked uint32 paramMuons = 54525
  }
}
   

// If you want to use the (CMS default) CLHEP random, 
// set these ones to false

    replace famosPileUp.UseTRandomEngine = true
    replace famosSimHits.UseTRandomEngine = true
    replace siTrackerGaussianSmearingRecHits.UseTRandomEngine = true
    replace caloRecHits.UseTRandomEngine = true
    replace paramMuons.UseTRandomEngine = true
    
   // Not to mix fast sim evts with full sim evts
     replace  mix.Label="famosSimHits"


    // Generate H -> gamgam @ 130.0 GeV
    include "FastSimulation/Configuration/data/Hgamgam.cfi"
    
    // Define Famos sequences
    include "FastSimulation/Configuration/data/FamosSequences.cff"

    // Turn on/off pile-up
    replace famosPileUp.PileUpSimulator.averageNumber = 5.0    
  
    // Parametrized magnetic field
    replace VolumeBasedMagneticFieldESProducer.useParametrizedTrackerField = true
   
    // You may not want to simulate everything for your study
    replace famosSimHits.SimulateCalorimetry = true
    replace famosSimHits.SimulateTracking = true
    # replace famosSimHits.SimulateMuons = false

    // Tracker MisAlignement 
     include "FastSimulation/Configuration/data/MisAlignment.cff" 

    // ECAL miscalibration. 
     include "FastSimulation/Configuration/data/MisCalibration.cff"
	 	
    // what's this?
//    service = Timing { }

untracked PSet maxEvents = {untracked int32 input = 1000}
#untracked PSet maxEvents = {untracked int32 input = 100}

source = PoolSource {
untracked vstring fileNames ={
        '/store/mc/2007/11/1/CSA07-H130_gammagamma_gluonfusion-1193935409/0011/103C6D88-D68B-DC11-B622-00093D120C06.root'
        }
   untracked uint32 debugVerbosity = 200
   untracked bool   debugFlag     = true
}

module simplePhotonAnalyzer = Julie {

  string phoProducer = "photons"
  string photonCollection = ""
  string primaryVertexProducer = "offlinePrimaryVerticesFromCTFTracks"
  string mcProducer = "source"  

}

    
    // Path definition		
    path p1 = { 
	famosWithElectronsAndPhotons, simplePhotonAnalyzer
    }


    // To write out events (not need: FastSimulation _is_ fast!)
     module o1 = PoolOutputModule { 
	 untracked string fileName = "/tmp/malcles/MyFirstFamosFile.root" 
	 untracked vstring outputCommands = {
	 "keep *",
	 "drop *_mix_*_*"
	}
    }
    endpath outpath = { o1 }
    
}		
